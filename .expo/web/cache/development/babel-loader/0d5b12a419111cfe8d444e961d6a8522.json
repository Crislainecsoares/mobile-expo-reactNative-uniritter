{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, useState } from 'react';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport api from \"../services/api\";\nimport parseErrorStack from 'react-native/Libraries/Core/Devtools/parseErrorStack';\n\nvar Login = function (_Component) {\n  _inherits(Login, _Component);\n\n  var _super = _createSuper(Login);\n\n  function Login() {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      loggedInAluno: null,\n      errorMessage: null,\n      matricula: '',\n      password: ''\n    };\n\n    _this.signIn = function _callee() {\n      var response, _response$data, aluno, token;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(api.post('http://192.168.0.14:3333/login', _objectSpread({}, _this.state)));\n\n            case 3:\n              response = _context.sent;\n              _response$data = response.data, aluno = _response$data.aluno, token = _response$data.token;\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(AsyncStorage.multiSet([['@CodeApi:token', token], ['@CodeApi:aluno', JSON.stringify(aluno)]]));\n\n            case 7:\n              _this.setState({\n                loggedInAluno: aluno\n              });\n\n              _this.props.navigation.navigate('Menu');\n\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n\n              _this.setState({\n                errorMessage: _context.t0.data.error\n              });\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 11]], Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var token, aluno;\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@CodeApi:token'));\n\n            case 2:\n              token = _context2.sent;\n              _context2.t0 = JSON;\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@CodeApi:aluno'));\n\n            case 6:\n              _context2.t1 = _context2.sent;\n              aluno = _context2.t0.parse.call(_context2.t0, _context2.t1);\n              if (token && aluno) this.setState({\n                loggedInAluno: aluno\n              });\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport { Login as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF'\n  },\n  input: {\n    marginTop: 15,\n    width: 300,\n    backgroundColor: '#FFF',\n    fontSize: 16,\n    borderBottomEndRadius: 3,\n    padding: 10\n  },\n  logo: {\n    width: 150,\n    height: 150,\n    borderRadius: 100\n  },\n  botao: {\n    width: 300,\n    height: 42,\n    backgroundColor: '#e60000',\n    marginTop: 20,\n    borderRadius: 4,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"sources":["/home/local/DOMAINNT/crislaines/Documents/trabalho-android-crislaine-soares/mobile/src/pages/Login.js"],"names":["React","Component","useState","api","parseErrorStack","Login","state","loggedInAluno","errorMessage","matricula","password","signIn","post","response","data","aluno","token","AsyncStorage","multiSet","JSON","stringify","setState","props","navigation","navigate","error","getItem","parse","styles","StyleSheet","create","container","flex","justifyContent","alignItems","backgroundColor","input","marginTop","width","fontSize","borderBottomEndRadius","padding","logo","height","borderRadius","botao"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;;;;;;;;;;;AAgBA,OAAOC,GAAP;AAEA,OAAOC,eAAP,MAA4B,sDAA5B;;IAEqBC,K;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNC,MAAAA,aAAa,EAAE,IADT;AAENC,MAAAA,YAAY,EAAE,IAFR;AAGNC,MAAAA,SAAS,EAAE,EAHL;AAINC,MAAAA,QAAQ,EAAE;AAJJ,K;;UASRC,M,GAAS;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAEkBR,GAAG,CAACS,IAAJ,CAAS,gCAAT,oBAAgD,MAAKN,KAArD,EAFlB;;AAAA;AAECO,cAAAA,QAFD;AAAA,+BAIoBA,QAAQ,CAACC,IAJ7B,EAIGC,KAJH,kBAIGA,KAJH,EAIUC,KAJV,kBAIUA,KAJV;AAAA;AAAA,+CAMCC,YAAY,CAACC,QAAb,CAAsB,CAC1B,CAAC,gBAAD,EAAmBF,KAAnB,CAD0B,EAE1B,CAAC,gBAAD,EAAmBG,IAAI,CAACC,SAAL,CAAeL,KAAf,CAAnB,CAF0B,CAAtB,CAND;;AAAA;AAWL,oBAAKM,QAAL,CAAc;AAAEd,gBAAAA,aAAa,EAAEQ;AAAjB,eAAd;;AAGA,oBAAKO,KAAL,CAAWC,UAAX,CAAsBC,QAAtB,CAA+B,MAA/B;;AAdK;AAAA;;AAAA;AAAA;AAAA;;AAiBL,oBAAKH,QAAL,CAAc;AAAEb,gBAAAA,YAAY,EAAE,YAASM,IAAT,CAAcW;AAA9B,eAAd;;AAjBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;;;;;;;;;;;;;+CAwBaR,YAAY,CAACS,OAAb,CAAqB,gBAArB,C;;;AAAdV,cAAAA,K;6BACQG,I;;+CAAiBF,YAAY,CAACS,OAAb,CAAqB,gBAArB,C;;;;AAAzBX,cAAAA,K,gBAAaY,K;AAEnB,kBAAIX,KAAK,IAAID,KAAb,EACE,KAAKM,QAAL,CAAc;AAAEd,gBAAAA,aAAa,EAAEQ;AAAjB,eAAd;;;;;;;;;;;;EAtC6Bd,S;;SAAdI,K;AA6HrB,IAAMuB,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,IAAI,EAAE,CADG;AAETC,IAAAA,cAAc,EAAE,QAFP;AAGTC,IAAAA,UAAU,EAAE,QAHH;AAITC,IAAAA,eAAe,EAAE;AAJR,GADoB;AAO/BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,SAAS,EAAE,EADN;AAELC,IAAAA,KAAK,EAAE,GAFF;AAGLH,IAAAA,eAAe,EAAE,MAHZ;AAILI,IAAAA,QAAQ,EAAE,EAJL;AAKLC,IAAAA,qBAAqB,EAAE,CALlB;AAMLC,IAAAA,OAAO,EAAE;AANJ,GAPwB;AAe/BC,EAAAA,IAAI,EAAE;AACJJ,IAAAA,KAAK,EAAE,GADH;AAEJK,IAAAA,MAAM,EAAE,GAFJ;AAGJC,IAAAA,YAAY,EAAE;AAHV,GAfyB;AAoB/BC,EAAAA,KAAK,EAAE;AACLP,IAAAA,KAAK,EAAE,GADF;AAELK,IAAAA,MAAM,EAAE,EAFH;AAGLR,IAAAA,eAAe,EAAE,SAHZ;AAILE,IAAAA,SAAS,EAAE,EAJN;AAKLO,IAAAA,YAAY,EAAE,CALT;AAMLV,IAAAA,UAAU,EAAE,QANP;AAOLD,IAAAA,cAAc,EAAE;AAPX;AApBwB,CAAlB,CAAf","sourcesContent":["import React, { Component, useState } from 'react';\n\nimport {\n  Platform,\n  StyleSheet,\n  Text,\n  View,\n  Button,\n  AsyncStorage,\n  Alert,\n  TextInput,\n  TouchableOpacity,\n  Image,\n  KeyboardAvoidingView,\n} from 'react-native';\n\nimport api from '../services/api';\n\nimport parseErrorStack from 'react-native/Libraries/Core/Devtools/parseErrorStack';\n\nexport default class Login extends Component {\n  state = {\n    loggedInAluno: null,\n    errorMessage: null,\n    matricula: '',\n    password: '',\n\n\n  };\n\n  signIn = async () => {\n    try {\n      const response = await api.post('http://192.168.0.14:3333/login', { ...this.state })\n\n      const { aluno, token } = response.data;\n\n      await AsyncStorage.multiSet([\n        ['@CodeApi:token', token],\n        ['@CodeApi:aluno', JSON.stringify(aluno)],\n      ]);\n\n      this.setState({ loggedInAluno: aluno });\n\n      // Alert.alert('Login Efetuado com sucesso');\n      this.props.navigation.navigate('Menu')\n\n    } catch (response) {\n      this.setState({ errorMessage: response.data.error })\n    }\n\n  };\n\n\n  async componentDidMount() {\n    const token = await AsyncStorage.getItem('@CodeApi:token');\n    const aluno = JSON.parse(await AsyncStorage.getItem('@CodeApi:aluno'));\n\n    if (token && aluno)\n      this.setState({ loggedInAluno: aluno });\n\n  }\n\n\n  // render () {\n    \n  //   if (this.state.loggedInAluno){\n  //   return (\n  //     <Text>Cris </Text>\n  //   )\n  //   } else {\n  //     return (\n  //     <Text>Guest </Text>\n  //     )}\n    \n  // }\n \n\n  // render() {\n\n    \n\n    \n  //   return (\n  //     <KeyboardAvoidingView\n  //       style={{ flex: 1 }}\n  //       behavior=\"padding\"\n\n  //     >\n\n  //       <View style={styles.container}>\n  //         <Image\n  //           source={require('../pages/LOGO.jpg')}\n  //           style={styles.logo}\n  //         />\n\n  //         <Text style={{ fontWeight: 'bold', marginTop: 15 }} >Informe seus dados para acesso a plataforma:</Text>\n          \n  //         <TextInput\n  //           style={styles.input}\n  //           placeholder=\"Informe sua matricula\"\n  //           value={this.state.matricula}\n  //           onChangeText={(text) => this.setState({ matricula: text })}\n  //           autoCapitalize=\"none\"\n  //           onSubmitEditing={() => { this.secondTextInput.focus(); }}\n  //         >\n  //         </TextInput>\n\n  //         <TextInput\n  //           style={styles.input}\n  //           secureTextEntry\n  //           value={this.state.password}\n  //           onChangeText={(text) => this.setState({ password: text })}\n  //           ref={(input) => { this.secondTextInput = input; }}\n  //           placeholder=\"Informe sua Senha\"\n  //         >\n  //         </TextInput>\n           \n\n  //         {!!this.state.loggedInAluno && <Text>{this.state.loggedInAluno.nome}</Text>}\n  //         {!!this.state.errorMessage && <Text>{this.state.errorMessage}</Text>}\n\n  //         {this.state.loggedInAluno\n  //           ? \n  //           <TouchableOpacity\n  //             style={styles.botao}\n  //             onPress={() => { this.props.navigation.navigate('Menu') }}>\n  //             <Text>Menu</Text>\n  //           </TouchableOpacity>\n  //           :\n  //           <TouchableOpacity\n  //             style={styles.botao}\n  //             onPress={this.signIn}>\n  //             <Text>Entrar</Text>\n  //           </TouchableOpacity>\n        \n  //         }         \n\n\n  //       </View>\n  //     </KeyboardAvoidingView>\n  //   );\n  // }\n\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F5FCFF',\n  },\n  input: {\n    marginTop: 15,\n    width: 300,\n    backgroundColor: '#FFF',\n    fontSize: 16,\n    borderBottomEndRadius: 3,\n    padding: 10,\n  },\n  logo: {\n    width: 150,\n    height: 150,\n    borderRadius: 100,\n  },\n  botao: {\n    width: 300,\n    height: 42,\n    backgroundColor: '#e60000',\n    marginTop: 20,\n    borderRadius: 4,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});"]},"metadata":{},"sourceType":"module"}